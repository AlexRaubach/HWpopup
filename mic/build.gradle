apply plugin: 'java'


sourceSets {
    main {
        java {
            srcDirs = ['src/mic'] // Consider moving src/mic to src/main/java
        }
    }
}

repositories {
    jcenter()
}

sourceCompatibility = '1.5'
targetCompatibility = '1.5'

dependencies {
    compileOnly files('lib/vengine.jar')
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.1.5'
    compile group: 'com.google.guava', name: 'guava-jdk5', version: '17.0'
}


task buildVmod(type: Zip) {
    archiveName 'full-xwing-module.vmod'
    duplicatesStrategy 'exclude'
    from compileJava
    from processResources
    from zipTree('vassal_module/full-xwing-module.vmod')
    for (dependency in (configurations.compile).files) {
        // Need to extract jars so vassal can find classes
        from zipTree(dependency)
    }

    exclude "*.jar"

    doLast {
        copy {
            from archivePath
            into 'vassal_module'
        }
    }
}